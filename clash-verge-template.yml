port: 7890
socks-port: 7891
allow-lan: false
mode: Rule
log-level: info
external-controller: 127.0.0.1:9090
unified-delay: true
hosts:
  time.facebook.com: 17.253.84.125
  time.android.com: 17.253.84.125
dns:
  enable: true
  use-hosts: true
  nameserver:
    - 119.29.29.29
    - 223.5.5.5
    - 223.6.6.6
    - tcp://223.5.5.5
    - tcp://223.6.6.6
    - tls://dns.google:853
    - tls://8.8.8.8:853
    - tls://8.8.4.4:853
    - tls://dns.alidns.com
    - tls://223.5.5.5
    - tls://223.6.6.6
    - tls://dot.pub
    - tls://1.12.12.12
    - tls://120.53.53.53
    - https://dns.google/dns-query
    - https://8.8.8.8/dns-query
    - https://8.8.4.4/dns-query
    - https://dns.alidns.com/dns-query
    - https://223.5.5.5/dns-query
    - https://223.6.6.6/dns-query
    - https://doh.pub/dns-query
    - https://1.12.12.12/dns-query
    - https://120.53.53.53/dns-query
  default-nameserver:
    - 119.29.29.29
    - 223.5.5.5
    - 223.6.6.6
    - tcp://119.29.29.29
    - tcp://223.5.5.5
    - tcp://223.6.6.6
proxies: # LEAVE THIS LINE!
rule-providers:
  reject:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: "https://fastly.jsdelivr.net/gh/kitcoun/clash-verge-rule-template@main/ruleset/reject.yaml"
    path: "./ruleset/reject.yaml"
  microsoft:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: "https://fastly.jsdelivr.net/gh/kitcoun/clash-verge-rule-template@main/ruleset/microsoft.yaml"
    path: "./ruleset/microsoft.yaml"
  apple:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: "https://fastly.jsdelivr.net/gh/kitcoun/clash-verge-rule-template@main/ruleset/apple.yaml"
    path: "./ruleset/apple.yaml"
  google:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: "https://fastly.jsdelivr.net/gh/kitcoun/clash-verge-rule-template@main/ruleset/google.yaml"
    path: "./ruleset/google.yaml"
  proxy:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: "https://fastly.jsdelivr.net/gh/kitcoun/clash-verge-rule-template@main/ruleset/proxy.yaml"
    path: "./ruleset/proxy.yaml"
  direct:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: "https://fastly.jsdelivr.net/gh/kitcoun/clash-verge-rule-template@main/ruleset/direct.yaml"
    path: "./ruleset/direct.yaml"
  private:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: "https://fastly.jsdelivr.net/gh/kitcoun/clash-verge-rule-template@main/ruleset/private.yaml"
    path: "./ruleset/private.yaml"
  gfw:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: "https://fastly.jsdelivr.net/gh/kitcoun/clash-verge-rule-template@main/ruleset/gfw.yaml"
    path: "./ruleset/gfw.yaml"
  tld-not-cn:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: "https://fastly.jsdelivr.net/gh/kitcoun/clash-verge-rule-template@main/ruleset/tld-not-cn.yaml"
    path: "./ruleset/tld-not-cn.yaml"
  telegramcidr:
    type: http
    format: yaml
    interval: 86400
    behavior: ipcidr
    url: "https://fastly.jsdelivr.net/gh/kitcoun/clash-verge-rule-template@main/ruleset/telegramcidr.yaml"
    path: "./ruleset/telegramcidr.yaml"
  cncidr:
    type: http
    format: yaml
    interval: 86400
    behavior: ipcidr
    url: "https://fastly.jsdelivr.net/gh/kitcoun/clash-verge-rule-template@main/ruleset/cncidr.yaml"
    path: "./ruleset/cncidr.yaml"
  lancidr:
    type: http
    format: yaml
    interval: 86400
    behavior: ipcidr
    url: "https://fastly.jsdelivr.net/gh/kitcoun/clash-verge-rule-template@main/ruleset/lancidr.yaml"
    path: "./ruleset/lancidr.yaml"
  applications:
    type: http
    format: yaml
    interval: 86400
    behavior: classical
    url: "https://fastly.jsdelivr.net/gh/kitcoun/clash-verge-rule-template@main/ruleset/applications.yaml"
    path: "./ruleset/applications.yaml"
  bahamut:
    type: http
    format: yaml
    interval: 86400
    behavior: classical
    url: "https://fastly.jsdelivr.net/gh/kitcoun/clash-verge-rule-template@main/ruleset/rule/Bahamut.yaml"
    path: "./ruleset/bahamut.yaml"
  YouTube:
    type: http
    format: yaml
    interval: 86400
    behavior: classical
    url: "https://fastly.jsdelivr.net/gh/kitcoun/clash-verge-rule-template@main/ruleset/rule/YouTube.yaml"
    path: "./ruleset/YouTube.yaml"
  Netflix:
    type: http
    format: yaml
    interval: 86400
    behavior: classical
    url: "https://fastly.jsdelivr.net/gh/kitcoun/clash-verge-rule-template@main/ruleset/rule/Netflix.yaml"
    path: "./ruleset/Netflix.yaml"
  Spotify:
    type: http
    format: yaml
    interval: 86400
    behavior: classical
    url: "https://fastly.jsdelivr.net/gh/kitcoun/clash-verge-rule-template@main/ruleset/rule/Spotify.yaml"
    path: "./ruleset/Spotify.yaml"

# 代理组 (来自 tun.txt 中的 proxy-groups)
proxy-groups:
  - name: "节点选择"
    type: "select"
    proxies: ["延迟选优", "故障转移"]
    # include-all: true
    # interval: 300
    # timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/adjust.svg"
  - name: "延迟选优"
    type: "url-test"
    interval: 120
    tolerance: 200
    # include-all: true
    timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/speed.svg"
  - name: "故障转移"
    type: "fallback"
    # include-all: true
    interval: 300
    timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/ambulance.svg"
  - name: "谷歌服务"
    type: "select"
    proxies: ["节点选择", "延迟选优", "故障转移", "全局直连"]
    # include-all: true
    # interval: 300
    # timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/google.svg"
  - name: "YouTube"
    type: "select"
    proxies: ["节点选择", "延迟选优", "故障转移", "全局直连"]
    # include-all: true
    # interval: 300
    # timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/youtube.svg"
  - name: "Netflix"
    type: "select"
    proxies: ["节点选择", "延迟选优", "故障转移", "全局直连"]
    # include-all: true
    # interval: 300
    # timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/xiaolin-007/clash@main/icon/netflix.svg"
  - name: "电报消息"
    type: "select"
    proxies: ["节点选择", "延迟选优", "故障转移", "全局直连"]
    # include-all: true
    # interval: 300
    # timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/telegram.svg"
  - name: "ChatGPT"
    type: "select"
    # include-all: true
    proxies: ["节点选择", "延迟选优", "故障转移"]
    # interval: 300
    # timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/chatgpt.svg"
  - name: "微软服务"
    type: "select"
    proxies: ["全局直连", "节点选择", "延迟选优"]
    # include-all: true
    # interval: 300
    # timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/microsoft.svg"
  - name: "苹果服务"
    type: "select"
    proxies: ["节点选择", "延迟选优", "故障转移", "全局直连"]
    # include-all: true
    # interval: 300
    # timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/apple.svg"
  - name: "动画疯"
    type: "select"
    proxies: ["节点选择"]
    # include-all: true
    filter: "(?i)台|tw|TW"
    # interval: 300
    # timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/xiaolin-007/clash@main/icon/Bahamut.svg"
  - name: "Spotify"
    type: "select"
    proxies: ["节点选择", "延迟选优", "故障转移", "全局直连"]
    # include-all: true
    # interval: 300
    # timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/xiaolin-007/clash@main/icon/spotify.svg"
  - name: "广告过滤"
    type: "select"
    proxies: ["REJECT", "DIRECT"]
    # interval: 300
    # timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/bug.svg"
  - name: "全局直连"
    type: "select"
    proxies: ["DIRECT", "节点选择", "延迟选优", "故障转移"]
    # include-all: true
    # interval: 300
    # timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/link.svg"
  - name: "全局拦截"
    type: "select"
    proxies: ["REJECT", "DIRECT"]
    # interval: 300
    # timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/block.svg"
  - name: "漏网之鱼"
    type: "select"
    proxies: ["节点选择", "延迟选优", "故障转移", "全局直连"]
    # include-all: true
    # interval: 300
    # timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/fish.svg"


rules:
  - "DOMAIN-SUFFIX,googleapis.cn,节点选择"
  - "DOMAIN-SUFFIX,gstatic.com,节点选择"
  - "DOMAIN-SUFFIX,xn--ngstr-lra8j.com,节点选择"
  - "DOMAIN-SUFFIX,github.io,节点选择"
  - "DOMAIN,v2rayse.com,节点选择"
  - "RULE-SET,applications,全局直连"
  - "RULE-SET,private,全局直连"
  - "RULE-SET,reject,广告过滤"
  - "RULE-SET,microsoft,微软服务"
  - "RULE-SET,apple,苹果服务"
  - "RULE-SET,YouTube,YouTube"
  - "RULE-SET,Netflix,Netflix"
  - "RULE-SET,bahamut,动画疯"
  - "RULE-SET,Spotify,Spotify"
  - "RULE-SET,google,谷歌服务"
  - "RULE-SET,proxy,节点选择"
  - "RULE-SET,gfw,节点选择"
  - "RULE-SET,tld-not-cn,节点选择"
  - "RULE-SET,direct,全局直连"
  - "RULE-SET,lancidr,全局直连,no-resolve"
  - "RULE-SET,cncidr,全局直连,no-resolve"
  - "RULE-SET,telegramcidr,电报消息,no-resolve"
  - "GEOSITE,CN,全局直连"
  - "GEOIP,LAN,全局直连,no-resolve"
  - "GEOIP,CN,全局直连,no-resolve"
  - "MATCH,漏网之鱼"
